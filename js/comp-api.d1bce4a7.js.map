{"version":3,"sources":["webpack:///./src/views/comp-api.vue?4d1f","webpack:///./src/views/comp-api.vue?1088","webpack:///src/views/comp-api.vue","webpack:///./src/views/comp-api.vue?8401","webpack:///./src/views/comp-api.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_l","item","index","key","type","label","config","on","$event","handleUpdateBoxConfig","field","arguments","model","value","callback","$$v","$set","expression","_e","childrenApi","childrenData","handleUpdate","staticRenderFns","component"],"mappings":"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","file":"js/comp-api.d1bce4a7.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comp-api.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comp-api.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('m-view',{staticClass:\"comp-api\",attrs:{\"paddingY\":\"md\",\"paddingX\":\"sm\"}},[(_vm.isBox)?_c('div',[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"盒属性\")]),_vm._l((_vm.boxConfigData),function(item,index){return _c('control-item',{key:(\"boxConfig\" + index),staticClass:\"m-mb-sm m-px-sm\",attrs:{\"type\":item.type,\"label\":item.label,\"config\":item.config},on:{\"input\":function($event){return _vm.handleUpdateBoxConfig(item.field, arguments[0])}},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}})})],2):_vm._e(),_c('div',[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"组件API\")]),(_vm.childrenApi)?_c('control-item',{key:\"children\",staticClass:\"m-mb-sm m-px-sm\",attrs:{\"type\":_vm.childrenApi.type,\"label\":_vm.childrenApi.label,\"config\":_vm.childrenApi.config},model:{value:(_vm.childrenData),callback:function ($$v) {_vm.childrenData=$$v},expression:\"childrenData\"}}):_vm._e(),_vm._l((_vm.propsData),function(item,index){return _c('control-item',{key:(\"props\" + index),staticClass:\"m-mb-sm m-px-sm\",attrs:{\"type\":item.type,\"label\":item.label,\"config\":item.config},on:{\"input\":function($event){return _vm.handleUpdate('props', item.field, arguments[0])}},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}})}),_vm._l((_vm.attrsData),function(item,index){return _c('control-item',{key:(\"attrs\" + index),staticClass:\"m-mb-sm m-px-sm\",attrs:{\"type\":item.type,\"label\":item.label,\"config\":item.config},on:{\"input\":function($event){return _vm.handleUpdate('attrs', item.field, arguments[0])}},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}})})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style lang=\"scss\">\r\n  .comp-api {\r\n\r\n  }\r\n</style>\r\n<template>\r\n  <m-view class=\"comp-api\" paddingY=\"md\" paddingX=\"sm\">\r\n    <div v-if=\"isBox\">\r\n      <el-divider content-position=\"left\">盒属性</el-divider>\r\n      <control-item  class=\"m-mb-sm m-px-sm\"\r\n                    v-model=\"item.value\"\r\n                    :type=\"item.type\"\r\n                    :key=\"`boxConfig${index}`\"\r\n                    :label=\"item.label\"\r\n                    :config=\"item.config\"\r\n                    @input=\"handleUpdateBoxConfig(item.field, arguments[0])\"\r\n                    v-for=\"(item, index) in boxConfigData\"></control-item>\r\n    </div>\r\n    <div>\r\n      <el-divider content-position=\"left\">组件API</el-divider>\r\n      <control-item v-if=\"childrenApi\" class=\"m-mb-sm m-px-sm\"\r\n                    v-model=\"childrenData\"\r\n                    :type=\"childrenApi.type\"\r\n                    key=\"children\"\r\n                    :label=\"childrenApi.label\"\r\n                    :config=\"childrenApi.config\"\r\n                  ></control-item>\r\n      <control-item class=\"m-mb-sm m-px-sm\"\r\n                    v-model=\"item.value\"\r\n                    :type=\"item.type\"\r\n                    :key=\"`props${index}`\"\r\n                    :label=\"item.label\"\r\n                    :config=\"item.config\"\r\n                    @input=\"handleUpdate('props', item.field, arguments[0])\"\r\n                    v-for=\"(item, index) in propsData\"></control-item>\r\n      <control-item class=\"m-mb-sm m-px-sm\"\r\n                    v-model=\"item.value\"\r\n                    :type=\"item.type\"\r\n                    :key=\"`attrs${index}`\"\r\n                    :label=\"item.label\"\r\n                    :config=\"item.config\"\r\n                    @input=\"handleUpdate('attrs', item.field, arguments[0])\"\r\n                    v-for=\"(item, index) in attrsData\"></control-item>\r\n    </div>\r\n  </m-view>\r\n</template>\r\n<script>\r\n  import ControlItem from '@/components/control-item'\r\n  import { createNamespacedHelpers } from 'vuex'\r\n  import { deepCopy } from '@mobov/es-helper'\r\n\r\n  const { mapGetters, mapState, mapMutations } = createNamespacedHelpers('project')\r\n\r\n  export default {\r\n    name: 'comp-api',\r\n    components: {\r\n      ControlItem\r\n    },\r\n    data () {\r\n      return {\r\n        propsData: [],\r\n        attrsData: [],\r\n        boxConfigData: []\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters([\r\n        'activeNode',\r\n        'activeNodeIsContainer'\r\n      ]),\r\n      ...mapState([\r\n        'activeUid'\r\n      ]),\r\n      // boxConfig () {\r\n      //   return this.compData.uiConfig.isBoxWrap ? this.activeNode.boxConfig : {}\r\n      // },\r\n      // props () {\r\n      //   return this.compData.control.children || false\r\n      // },\r\n      isBox () {\r\n        return (this.compData.uiConfig && this.compData.uiConfig.isBoxWrap)\r\n      },\r\n      compData () {\r\n        return this.$store.getters['library/getComponent'](this.activeNode.name)\r\n      },\r\n      boxConfigApi () {\r\n        return this.$store.getters['library/getComponent']('HBox').control.props\r\n      },\r\n      propsApi () {\r\n        return this.compData.control.props || {}\r\n      },\r\n      attrsApi () {\r\n        return this.compData.control.attrs || {}\r\n      },\r\n      childrenApi () {\r\n        return this.compData.control.children || false\r\n      },\r\n      childrenData: {\r\n        get () {\r\n          return this.activeNode.children || false\r\n        },\r\n        set (val) {\r\n          this.activeNode.children = val\r\n        }\r\n      },\r\n      boxConfigApiKeys () {\r\n        return ['flex', 'space']\r\n      },\r\n      propsApiKeys () {\r\n        return Object.keys(this.propsApi)\r\n      },\r\n      attrsApiKeys () {\r\n        return Object.keys(this.attrsApi)\r\n      }\r\n    },\r\n    watch: {\r\n      activeUid: {\r\n        immediate: true,\r\n        handler () {\r\n          this.init()\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapMutations([\r\n        'SET_NODE_DATA',\r\n        'SET_NODE_BOX_CONFIG'\r\n      ]),\r\n      init () {\r\n        this.initData('props')\r\n        this.initData('attrs')\r\n        if (this.isBox) {\r\n          this.initBoxConfigData()\r\n        }\r\n      },\r\n      initBoxConfigData () {\r\n        const apiKeys = this.boxConfigApiKeys\r\n        const api = this.boxConfigApi\r\n        const fieldData = this.activeNode.boxConfig\r\n        const data = []\r\n        apiKeys.forEach(field => {\r\n          const result = Object.assign({\r\n              field,\r\n              config: {}\r\n            },\r\n            deepCopy(api[field]),\r\n            fieldData[field] === undefined ? {} : {\r\n              value: fieldData[field]\r\n            })\r\n          data.push(result)\r\n        })\r\n        this.boxConfigData = data\r\n      },\r\n      initData (type = 'props') {\r\n        const apiKeys = this[`${type}ApiKeys`]\r\n        const api = this[`${type}Api`]\r\n        const fieldData = this.activeNode.nodeData[type]\r\n        const data = []\r\n        apiKeys.forEach(field => {\r\n          const result = Object.assign({\r\n              field,\r\n              config: {}\r\n            },\r\n            deepCopy(api[field]),\r\n            fieldData[field] === undefined ? {} : {\r\n              value: fieldData[field]\r\n            })\r\n          data.push(result)\r\n        })\r\n        this[`${type}Data`] = data\r\n      },\r\n      handleUpdate (type = 'props', field, val) {\r\n        const data = {\r\n          [field]: val\r\n        }\r\n        this.SET_NODE_DATA({\r\n          uid: this.activeUid,\r\n          [type]: data\r\n        })\r\n      },\r\n      handleUpdateBoxConfig (field, val) {\r\n        this.SET_NODE_BOX_CONFIG({\r\n          uid: this.activeUid,\r\n          boxConfig: {\r\n            [field]: val\r\n          }\r\n        })\r\n      }\r\n    },\r\n    mounted () {\r\n    }\r\n  }\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comp-api.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comp-api.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comp-api.vue?vue&type=template&id=8e69da00&\"\nimport script from \"./comp-api.vue?vue&type=script&lang=js&\"\nexport * from \"./comp-api.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comp-api.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}